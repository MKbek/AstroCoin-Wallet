"use strict";(self["webpackChunkwallet"]=self["webpackChunkwallet"]||[]).push([[434],{80434:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user-app"}},[a("div",{staticClass:"user-page"},[a("router-link",{staticClass:"close-page",attrs:{to:"/"}},[a("i",{staticClass:"ai ai-arrow-back"}),a("div",{staticClass:"close-title"},[t._v("Back")])]),a("div",{staticClass:"user-photo"},[a("div",{staticClass:"user-pic-block"},[a("img",{ref:"image",staticClass:"user-pic",attrs:{src:t.user.photo?this.$store.state.url+t.user.photo:s(60129),alt:""}})]),a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".jpg, .png, .jpeg, |image/*"},on:{change:t.onFileChange}}),a("div",{staticClass:"edit-user-pic",on:{click:function(e){return t.$refs.fileInput.click()}}},[a("i",{staticClass:"ai ai-camera-outline"})])]),a("div",{staticClass:"user-fullname"},[t._v(t._s(t.user.name)+" "+t._s(t.user.last_name)+" "),t.user.verify?a("VerifyAccountBadge",{attrs:{width:"28",height:"28"}}):t._e()],1),a("div",{staticClass:"user-email"},[t._v(t._s(t.user.email))]),a("div",{staticClass:"user-tools"},[a("ul",{staticClass:"tools-items"},[a("router-link",{attrs:{tag:"li",to:"/ranks"}},[a("i",{staticClass:"ai ai-trending-up"}),t._v("Student Ranking")])],1),a("ul",{staticClass:"tools-items"},[a("li",[a("i",{staticClass:"ai ai-person-outline"}),t._v(t._s(t.user.qwasar))]),a("li",[a("i",{staticClass:"ai ai-school-outline"}),t._v(t._s(t.user.stack))]),a("li",[a("i",{staticClass:"ai ai-call-outline"}),a("span",[t._v("+998"+t._s(t.user.number))])]),a("li",[a("i",{staticClass:"ai ai-wallet-outline"}),t._v(t._s(t.user.wallet.slice(0,7)+"......."+t.user.wallet.slice(-9,t.user.wallet.length)))])]),a("ul",{staticClass:"tools-items"},[a("router-link",{attrs:{tag:"li",to:"/update-password"}},[a("i",{staticClass:"ai ai-key-outline"}),t._v("Change password")])],1),a("ul",{staticClass:"tools-items"},[a("li",{staticClass:"btn-log-out",on:{click:t.logout}},[a("i",{staticClass:"ai ai-log-out-outline"}),t._v("Log Out")])])])],1),t.croppedImage?a("img",{attrs:{src:t.croppedImage,alt:""}}):t._e(),a("div",{staticClass:"modals",attrs:{id:"modals"}},[a("div",{class:{active:t.openUpload},attrs:{id:"upload-avatar"}},[a("div",{staticClass:"modal-header"},[a("div",{staticClass:"modal-title"},[t._v("Upload")]),a("div",{staticClass:"modal-tools"},[a("div",{staticClass:"modal-close",on:{click:t.closeModals}},[a("i",{staticClass:"ai ai-close"})])])]),a("div",{staticClass:"modal-body"},[a("Cropper",{ref:"cropper",attrs:{src:t.image,"stencil-component":"circle-stencil"}})],1),a("div",{staticClass:"upload-tools"},[a("button",{on:{click:t.reset}},[t._v("Reset")]),a("button",{on:{click:t.uploadImage}},[t._v("Upload")])])])])])},i=[],r=s(16198),o=(s(41539),s(78783),s(33948),s(60285),s(41637),s(78975),s(26867)),l=s(54661),n={name:"UserPage",data:function(){return{user:{},image:null,openUpload:!1,croppedImage:null}},components:{VerifyAccountBadge:l.Z,Cropper:o.fl},mounted:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.state.userModal=!1,document.title="AstroCoin | My Profile",t.$store.state.user){e.next=5;break}return e.next=5,t.$store.dispatch("getUser");case 5:t.user=t.$store.state.user,window.addEventListener("keydown",(function(e){"Escape"==e.key&&t.$router.push("/")}));case 7:case"end":return e.stop()}}),e)})))()},methods:{closeModals:function(){this.openUpload=!1},logout:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("logout");case 2:t.$router.push("/login");case 3:case"end":return e.stop()}}),e)})))()},reset:function(){this.$refs.cropper.reset(),this.image=null,this.openUpload=!1},onFileChange:function(t){var e=t.target.files[0];this.image=URL.createObjectURL(e),this.openUpload=!0},uploadImage:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){var s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.$refs.cropper.getResult(),a=s.canvas,!a){e.next=5;break}return i=new FormData,e.next=5,a.toBlob((function(e){i.append("photo",e),t.$store.dispatch("setPhoto",i).then((function(e){t.$refs.image.src=t.$store.state.url+e.data.path}))}),"image/jpeg");case 5:t.openUpload=!1,Toast.fire("Success","Photo uploaded","success");case 7:case"end":return e.stop()}}),e)})))()}}},c=n,u=s(1001),p=(0,u.Z)(c,a,i,!1,null,"4caec4b0",null),d=p.exports}}]);
//# sourceMappingURL=434-legacy.000b65e7.js.map