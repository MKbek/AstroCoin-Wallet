"use strict";(self["webpackChunkwallet"]=self["webpackChunkwallet"]||[]).push([[434],{434:function(s,t,a){a.r(t),a.d(t,{default:function(){return p}});var e=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{attrs:{id:"user-app"}},[e("div",{staticClass:"user-page"},[e("router-link",{staticClass:"close-page",attrs:{to:"/"}},[e("i",{staticClass:"ai ai-arrow-back"}),e("div",{staticClass:"close-title"},[s._v("Back")])]),e("div",{staticClass:"user-photo"},[e("div",{staticClass:"user-pic-block"},[e("img",{ref:"image",staticClass:"user-pic",attrs:{src:s.user.photo?this.$store.state.url+s.user.photo:a(129),alt:""}})]),e("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".jpg, .png, .jpeg, |image/*"},on:{change:s.onFileChange}}),e("div",{staticClass:"edit-user-pic",on:{click:function(t){return s.$refs.fileInput.click()}}},[e("i",{staticClass:"ai ai-camera-outline"})])]),e("div",{staticClass:"user-fullname"},[s._v(s._s(s.user.name)+" "+s._s(s.user.last_name)+" "),s.user.verify?e("VerifyAccountBadge",{attrs:{width:"28",height:"28"}}):s._e()],1),e("div",{staticClass:"user-email"},[s._v(s._s(s.user.email))]),e("div",{staticClass:"user-tools"},[e("ul",{staticClass:"tools-items"},[e("router-link",{attrs:{tag:"li",to:"/ranks"}},[e("i",{staticClass:"ai ai-trending-up"}),s._v("Student Ranking")])],1),e("ul",{staticClass:"tools-items"},[e("li",[e("i",{staticClass:"ai ai-person-outline"}),s._v(s._s(s.user.qwasar))]),e("li",[e("i",{staticClass:"ai ai-school-outline"}),s._v(s._s(s.user.stack))]),e("li",[e("i",{staticClass:"ai ai-call-outline"}),e("span",[s._v("+998"+s._s(s.user.number))])]),e("li",[e("i",{staticClass:"ai ai-wallet-outline"}),s._v(s._s(s.user.wallet.slice(0,7)+"......."+s.user.wallet.slice(-9,s.user.wallet.length)))])]),e("ul",{staticClass:"tools-items"},[e("router-link",{attrs:{tag:"li",to:"/update-password"}},[e("i",{staticClass:"ai ai-key-outline"}),s._v("Change password")])],1),e("ul",{staticClass:"tools-items"},[e("li",{staticClass:"btn-log-out",on:{click:s.logout}},[e("i",{staticClass:"ai ai-log-out-outline"}),s._v("Log Out")])])])],1),s.croppedImage?e("img",{attrs:{src:s.croppedImage,alt:""}}):s._e(),e("div",{staticClass:"modals",attrs:{id:"modals"}},[e("div",{class:{active:s.openUpload},attrs:{id:"upload-avatar"}},[e("div",{staticClass:"modal-header"},[e("div",{staticClass:"modal-title"},[s._v("Upload")]),e("div",{staticClass:"modal-tools"},[e("div",{staticClass:"modal-close",on:{click:s.closeModals}},[e("i",{staticClass:"ai ai-close"})])])]),e("div",{staticClass:"modal-body"},[e("Cropper",{ref:"cropper",attrs:{src:s.image,"stencil-component":"circle-stencil"}})],1),e("div",{staticClass:"upload-tools"},[e("button",{on:{click:s.reset}},[s._v("Reset")]),e("button",{on:{click:s.uploadImage}},[s._v("Upload")])])])])])},i=[],l=a(6867),o=a(4661),r={name:"UserPage",data:()=>({user:{},image:null,openUpload:!1,croppedImage:null}),components:{VerifyAccountBadge:o.Z,Cropper:l.fl},async mounted(){this.$store.state.userModal=!1,document.title="AstroCoin | My Profile",this.$store.state.user||await this.$store.dispatch("getUser"),this.user=this.$store.state.user,window.addEventListener("keydown",(s=>{"Escape"==s.key&&this.$router.push("/")}))},methods:{closeModals(){this.openUpload=!1},async logout(){await this.$store.dispatch("logout"),this.$router.push("/login")},reset(){this.$refs.cropper.reset(),this.image=null,this.openUpload=!1},onFileChange(s){const t=s.target.files[0];this.image=URL.createObjectURL(t),this.openUpload=!0},async uploadImage(){const{canvas:s}=this.$refs.cropper.getResult();if(s){const t=new FormData;await s.toBlob((s=>{t.append("photo",s),this.$store.dispatch("setPhoto",t).then((s=>{this.$refs.image.src=this.$store.state.url+s.data.path}))}),"image/jpeg")}this.openUpload=!1,Toast.fire("Success","Photo uploaded","success")}}},c=r,n=a(1001),u=(0,n.Z)(c,e,i,!1,null,"4caec4b0",null),p=u.exports}}]);
//# sourceMappingURL=434.c0c1d428.js.map